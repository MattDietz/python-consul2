language: python

git:
  lfs_skip_smudge: true

before_install:
  - wget -O tests/consul_1.6.1_linux_amd64.zip https://releases.hashicorp.com/consul/1.6.1/consul_1.6.1_linux_amd64.zip
  - cd tests
  - unzip consul_1.6.1_linux_amd64.zip
  - mv consul consul.linux64

matrix:
  include:
    - os: linux
      python: '2.7'
      env: TOXENV=py27
    - os: linux
      python: '3.5'
      env: TOXENV=py35
    - os: linux
      python: '3.6'
      env: TOXENV=py36
    - os: linux
      python: '3.7'
      env: TOXENV=py37
    - os: linux
      python: 'pypy'
      env: TOXENV=pypy
    - os: linux
      python: 'pypy3'
      env: TOXENV=pypy3
    - os: linux
      python: '3.7-dev'
      env: TOXENV=37dev
    - os: linux
      python: '3.8-dev'
      env: TOXENV=38dev
    - os: linux
      python: 'nightly'
      env: TOXENV=nightly

install:
  - pip install tox
  - pip install tox-travis

script:
  - tox


deploy:
        provider: pypi
        user: poppys
        password:
          secure: JVQo2ufR1pJD9AtpNuLsHNKzT7tvpCOQ3bAp3eOm8Hvk0XrInB1G+mChC7cx+gfQ6yAddRI4YjeDBbi2ZO1m/HZecQpizaiPSrkiBkeqwbSWHLwMu0DeC4Tlfy17wfrnqPjyoYlY4pXLhOl32YYnWDGGEn46wPNYcZAPp6UL6GN8jY3HjbYdYZ9xej58/pb8LvqlvCjCA5oXor2QaRLof5tlj8ZflwPW4vx8GSDej9vpXSu3vQFhM3qStLS8ew9yjVPsnIpDSDOVn13xC3hD8Xmk2YOjDEnFfi8RA+cWuoTj0pN7E6fqgCtM3gGuAe3gqj47d0G1segtVJ2qxXvuITV9RJ6zkwzRs/s3xwFSEX+7OXR4UVrwl3heHykggIqHCPHBJIbh3QtniyRCp5kH4VmAH/7q09HCFNVZVfgvN7E8BbaNSoDl6WA0ndEcsv8PJhQYa4LcqR1nbuOPbkx7QxmCEyI6yKfKkMiuOEvrnOU8ONYzvVtKo1MxR+YaLVkKrgwj1V/URUevvRQztiaNiD1yDzaCOAPqfR2VwuB2BsVaVV5SE3Md2IjCmr4vvuj11h1EJ4qOi0BpmCmW+1aWBlsOVEamNbhxFQ7hTl+GtbHOEGb8r6GlO9xDIM0rNOYjm9MU1qjuTfGmqttwAR46xIhNskHRXzN5SVz6SAV0uGw=
        on:
          tags: true


